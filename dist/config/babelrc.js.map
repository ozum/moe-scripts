{"version":3,"sources":["../../src/config/babelrc.js"],"names":["require","ifAnyDep","parseEnv","isTest","process","env","BABEL_ENV","NODE_ENV","isPreact","isRollup","isUMD","BUILD_FORMAT","isWebpack","treeshake","alias","react","envTargets","node","browsers","envOptions","modules","loose","targets","module","exports","api","opts","presets","resolve","filter","Boolean","plugins","root","pragma","removeImport","mode"],"mappings":"eAA+BA,QAAQ,UAAR,C;IAAvBC,Q,YAAAA,Q;IAAUC,Q,YAAAA,Q;;AAElB,IAAMC,SAAS,CAACC,QAAQC,GAAR,CAAYC,SAAZ,IAAyBF,QAAQC,GAAR,CAAYE,QAAtC,MAAoD,MAAnE;AACA,IAAMC,WAAWN,SAAS,cAAT,EAAyB,KAAzB,CAAjB;AACA,IAAMO,WAAWP,SAAS,cAAT,EAAyB,KAAzB,CAAjB;AACA,IAAMQ,QAAQN,QAAQC,GAAR,CAAYM,YAAZ,KAA6B,KAA3C;AACA,IAAMC,YAAYV,SAAS,eAAT,EAA0B,KAA1B,CAAlB;AACA,IAAMW,YAAYX,SAAS,iBAAT,EAA4BO,YAAYG,SAAxC,CAAlB;AACA,IAAME,QAAQZ,SAAS,aAAT,EAAwBM,WAAW;AAAEO,SAAO;AAAT,CAAX,GAAiC,IAAzD,CAAd;AAEA,IAAMC,aAAab,SAAS;AAAEc,QAAM;AAAR,CAAT,GAA+BL,aAAaH,QAAb,GAAwB;AAAES,YAAU,CAAC,OAAD,EAAU,OAAV;AAAZ,CAAxB,GAA2D;AAAED,QAAM;AAAR,CAA7G;AACA,IAAME,aAAa;AAAEC,WAAS,KAAX;AAAkBC,SAAO,IAAzB;AAA+BC,WAASN;AAAxC,CAAnB;;AAEAO,OAAOC,OAAP,GAAiB,UAAgBC,GAAhB,EAAqBC,IAArB,EAAgC;AAAA,MAAXA,IAAW;AAAXA,QAAW,GAAJ,EAAI;AAAA;;AAC/C,SAAO;AACLC,aAAS,CACP,CAAC3B,QAAQ4B,OAAR,CAAgB,mBAAhB,CAAD,EAAuCT,UAAvC,CADO,EAEPlB,SAAS,CAAC,OAAD,EAAU,QAAV,CAAT,EAA8BD,QAAQ4B,OAAR,CAAgB,qBAAhB,CAA9B,CAFO,EAGPC,MAHO,CAGAC,OAHA,CADJ;AAKLC,aAAS,CACP/B,QAAQ4B,OAAR,CAAgB,cAAhB,CADO,EAEPnB,WAAWT,QAAQ4B,OAAR,CAAgB,gCAAhB,CAAX,GAA+D,IAFxD,EAGP;AACA;AACAd,YAAQ,CAACd,QAAQ4B,OAAR,CAAgB,8BAAhB,CAAD,EAAkD;AAAEI,YAAM,CAAC,OAAD,CAAR;AAAmBlB;AAAnB,KAAlD,CAAR,GAAwF,IALjF,EAMPN,WAAW,CAACR,QAAQ4B,OAAR,CAAgB,kCAAhB,CAAD,EAAsD;AAAEK,cAAQ;AAAV,KAAtD,CAAX,GAAoF,IAN7E,EAOP,CAACjC,QAAQ4B,OAAR,CAAgB,gDAAhB,CAAD,EAAoEpB,WAAW;AAAE0B,oBAAc;AAAhB,KAAX,GAAoC;AAAEC,YAAM;AAAR,KAAxG,CAPO,EAQPzB,QAAQV,QAAQ4B,OAAR,CAAgB,qDAAhB,CAAR,GAAiF,IAR1E,EASP;AACA5B,YAAQ4B,OAAR,CAAgB,yCAAhB,CAVO,EAWP5B,QAAQ4B,OAAR,CAAgB,2CAAhB,CAXO,EAYP5B,QAAQ4B,OAAR,CAAgB,2CAAhB,CAZO,EAaPf,YAAY,IAAZ,GAAmBb,QAAQ4B,OAAR,CAAgB,0CAAhB,CAbZ,EAcPC,MAdO,CAcAC,OAdA;AALJ,GAAP;AAqBD,CAtBD","file":"babelrc.js","sourcesContent":["const { ifAnyDep, parseEnv } = require(\"../utils\");\n\nconst isTest = (process.env.BABEL_ENV || process.env.NODE_ENV) === \"test\";\nconst isPreact = parseEnv(\"BUILD_PREACT\", false);\nconst isRollup = parseEnv(\"BUILD_ROLLUP\", false);\nconst isUMD = process.env.BUILD_FORMAT === \"umd\";\nconst isWebpack = parseEnv(\"BUILD_WEBPACK\", false);\nconst treeshake = parseEnv(\"BUILD_TREESHAKE\", isRollup || isWebpack);\nconst alias = parseEnv(\"BUILD_ALIAS\", isPreact ? { react: \"preact\" } : null);\n\nconst envTargets = isTest ? { node: \"current\" } : isWebpack || isRollup ? { browsers: [\"ie 10\", \"ios 7\"] } : { node: \"4.5\" };\nconst envOptions = { modules: false, loose: true, targets: envTargets };\n\nmodule.exports = function preset(api, opts = {}) {\n  return {\n    presets: [\n      [require.resolve(\"@babel/preset-env\"), envOptions],\n      ifAnyDep([\"react\", \"preact\"], require.resolve(\"@babel/preset-react\")),\n    ].filter(Boolean),\n    plugins: [\n      require.resolve(\"babel-macros\"),\n      isRollup ? require.resolve(\"@babel/plugin-external-helpers\") : null,\n      // we're actually not using JSX at all, but I'm leaving this\n      // in here just in case we ever do (this would be easy to miss).\n      alias ? [require.resolve(\"babel-plugin-module-resolver\"), { root: [\"./src\"], alias }] : null,\n      isPreact ? [require.resolve(\"babel-plugin-transform-react-jsx\"), { pragma: \"h\" }] : null,\n      [require.resolve(\"babel-plugin-transform-react-remove-prop-types\"), isPreact ? { removeImport: true } : { mode: \"unsafe-wrap\" }],\n      isUMD ? require.resolve(\"babel-plugin-transform-inline-environment-variables\") : null,\n      // TODO: use loose mode when upgrading to babel@7\n      require.resolve(\"@babel/plugin-proposal-class-properties\"),\n      require.resolve(\"@babel/plugin-proposal-object-rest-spread\"),\n      require.resolve(\"babel-plugin-minify-dead-code-elimination\"),\n      treeshake ? null : require.resolve(\"@babel/plugin-transform-modules-commonjs\"),\n    ].filter(Boolean),\n  };\n};\n"]}