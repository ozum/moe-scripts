{"version":3,"sources":["../../src/scripts/precommit.js"],"names":["path","require","spawn","isOptedIn","hasPkgProp","hasFile","resolveBin","here","join","__dirname","p","hereRelative","replace","process","cwd","args","argv","slice","useBuiltInConfig","includes","config","lintStagedResult","sync","stdio","status","exit","validateResult"],"mappings":"AAAA,IAAMA,OAAOC,QAAQ,MAAR,CAAb;;AACA,IAAMC,QAAQD,QAAQ,aAAR,CAAd;;eACuDA,QAAQ,UAAR,C;IAA/CE,S,YAAAA,S;IAAWC,U,YAAAA,U;IAAYC,O,YAAAA,O;IAASC,U,YAAAA,U;;AAExC,IAAMC,OAAO;AAAA,SAAKP,KAAKQ,IAAL,CAAUC,SAAV,EAAqBC,CAArB,CAAL;AAAA,CAAb;;AACA,IAAMC,eAAe;AAAA,SAAKJ,KAAKG,CAAL,EAAQE,OAAR,CAAgBC,QAAQC,GAAR,EAAhB,EAA+B,GAA/B,CAAL;AAAA,CAArB;;AAEA,IAAMC,OAAOF,QAAQG,IAAR,CAAaC,KAAb,CAAmB,CAAnB,CAAb;AAEA,IAAMC,mBACJ,CAACH,KAAKI,QAAL,CAAc,UAAd,CAAD,IAA8B,CAACd,QAAQ,eAAR,CAA/B,IAA2D,CAACA,QAAQ,uBAAR,CAA5D,IAAgG,CAACD,WAAW,aAAX,CADnG;AAGA,IAAMgB,SAASF,mBAAmB,CAAC,UAAD,EAAaP,aAAa,2BAAb,CAAb,CAAnB,GAA6E,EAA5F;AAEA,IAAMU,mBAAmBnB,MAAMoB,IAAN,CAAWhB,WAAW,aAAX,CAAX,EAA0Cc,MAA1C,QAAqDL,IAArD,GAA4D;AAAEQ,SAAO;AAAT,CAA5D,CAAzB;;AAEA,IAAIF,iBAAiBG,MAAjB,KAA4B,CAA5B,IAAiC,CAACrB,UAAU,YAAV,CAAtC,EAA+D;AAC7DU,UAAQY,IAAR,CAAaJ,iBAAiBG,MAA9B;AACD,CAFD,MAEO;AACL,MAAME,iBAAiBxB,MAAMoB,IAAN,CAAW,KAAX,EAAkB,CAAC,KAAD,EAAQ,UAAR,CAAlB,EAAuC;AAC5DC,WAAO;AADqD,GAAvC,CAAvB;AAIAV,UAAQY,IAAR,CAAaC,eAAeF,MAA5B;AACD","file":"precommit.js","sourcesContent":["const path = require(\"path\");\nconst spawn = require(\"cross-spawn\");\nconst { isOptedIn, hasPkgProp, hasFile, resolveBin } = require(\"../utils\");\n\nconst here = p => path.join(__dirname, p);\nconst hereRelative = p => here(p).replace(process.cwd(), \".\");\n\nconst args = process.argv.slice(2);\n\nconst useBuiltInConfig =\n  !args.includes(\"--config\") && !hasFile(\".lintstagedrc\") && !hasFile(\"lint-staged.config.js\") && !hasPkgProp(\"lint-staged\");\n\nconst config = useBuiltInConfig ? [\"--config\", hereRelative(\"../config/lintstagedrc.js\")] : [];\n\nconst lintStagedResult = spawn.sync(resolveBin(\"lint-staged\"), [...config, ...args], { stdio: \"inherit\" });\n\nif (lintStagedResult.status !== 0 || !isOptedIn(\"pre-commit\")) {\n  process.exit(lintStagedResult.status);\n} else {\n  const validateResult = spawn.sync(\"npm\", [\"run\", \"validate\"], {\n    stdio: \"inherit\",\n  });\n\n  process.exit(validateResult.status);\n}\n"]}